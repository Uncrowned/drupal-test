<?php

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
require_once '../ModulesList.php';
/**
 * Description of XmlParce
 *
 * @author leo
 */
class testXmlParse extends PHPUnit_Framework_TestCase {

    public function testSimpleXml() {
        $filename = __DIR__ . '/modules_list.xml';
        $xml = simplexml_load_file($filename);
        
        $info = $xml->xpath('/modules/module');
        $this->assertTrue(is_array($info));
        $this->assertCount(8, $info);
        
        $this->assertEquals("cck_formatter_view", $info[0]->name);
        $this->assertTrue(is_string((string) $info[0]->name));
    } 
    
    public function testCreateModules() {
        $filename = __DIR__ . '/modules_list.xml';
        $xml = simplexml_load_file($filename);
        
        foreach ($xml->xpath('/modules/module') as $module_data_xml) {
           $name = (string)$module_data_xml->name;
           $module = ModulesList::GetModule($name);
           $module2 = ModulesList::GetModule($name);
           $this->assertTrue($module === $module2);
           $module->load($module_data_xml);
           $this->assertTrue($module->isLoaded());
        }
    }
}
